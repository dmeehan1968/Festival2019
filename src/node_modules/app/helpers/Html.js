import React from 'react'
import serialize from 'serialize-javascript'
import { Helmet } from 'react-helmet'

import './Html.less'

export default (body, state) => {
  const helmet = Helmet.renderStatic()
  return (`
      <!doctype html>
      <html ${helmet.htmlAttributes.toString()}>
        <head>
          ${helmet.title.toString()}
          ${helmet.base.toString()}
          ${helmet.link.toString()}
          <meta charset="utf-8" />
          ${helmet.meta.toString()}
          ${helmet.script.toString()}
          ${helmet.noscript.toString()}
          ${helmet.style.toString()}
          <link rel="stylesheet" type="text/css" href="/style.css" />
          <script type="text/javascript">
            window.__INITIAL_STATE__ = ${serialize(state, { isJSON: true })}
          </script>
        </head>
        <body ${helmet.bodyAttributes.toString()}>
          <main id="root">${body}</main>
          <script type="text/javascript" src="/client.bundle.js"></script>
        </body>
      </html>
    `
  )
}
