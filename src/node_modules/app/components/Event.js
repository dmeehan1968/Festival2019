import React from 'react'
import { connect } from 'react-redux'
import { Helmet } from 'react-helmet'
import VenueMap from 'app/components/VenueMap'

const Meta = ({ title, content }) => {
  const cssClassNameFromString = s => {
    return s
      .toLowerCase()
      .replace(/[^a-z0-9]/g,'-')  // non-word to hyphen
      .replace(/--/g,'-') // remove duplicate hyphens
      .replace(/^-+/g,'') // remove leading hyphens
      .replace(/-+$/g,'') // remove trailing hyphens
    }

  if (!content) return null
  return (
    <section className={cssClassNameFromString(title)}>
      <h1>{title}</h1>
      <div>{content}</div>
    </section>
  )
}

const Event = ({ event = {} }) => {
  return (
    <section className="event">
      <Helmet>
        <title>{event.title}</title>
      </Helmet>
      <Meta title="Title" content={event.title} />
      <Meta title="Status" content="-" />
      <Meta title="Subtitle" content={event.subtitle} />
      <Meta title="About the Event" content={event.shortdesc} />
      <Meta title="Event Type" content={event.eventtypes.map(e => e.description).join(', ')} />
      <Meta title="Disciplines" content={event.disciplines.map(d => d.description).join(', ')} />
      <Meta title="Telephone" content={event.contact.telephone} />
      <Meta title="Email" content={event.contact.email} />
      <Meta title="Web" content={event.contact.website} />
      <Meta title="Booking Contact" content="-" />
      <Meta title="Booking Info" content="-" />
      <Meta title="Age Info" content={event.ageinfo} />
      <Meta title="Opening Times" content="-" />
      <Meta title="Further Info" content={event.furtherinfo} />
      <Meta title="Long Description" content={event.longdesc} />
      <h1>Venue Information</h1>
      <Meta
        title="Map"
        content={
          <VenueMap
            lat={event.venue.addresscontact.latitude}
            lng={event.venue.addresscontact.longitude}
            title={event.title}
          />
        }
      />
      <Meta title="Address" content="-" />
      <Meta title="For Venue Information" content={event.venue.telephone} />
      <Meta title="Region" content="-" />
      <Meta title="Disabled" content={event.venue.disabled.description} />
      <Meta title="Toilets" content={event.venue.toilet.description} />
      <Meta title="Dogs" content={event.venue.dog.description} />
      <Meta title="Refreshments" content={event.venue.refreshments} />
      <Meta title="Directions (By Foot)" content={event.venue.byfoot} />
      <Meta title="Directions (By Car)" content={event.venue.bycar} />
      <Meta title="Directions (By Public Transport)" content={event.venue.bypublictransport} />
      <Meta title="Parking" content={event.venue.parking} />
      <Meta title="Further Info" content={event.venue.furtherinfo} />
      <h2>Events at this venue</h2>
      <p>-</p>
    </section>
  )
}

const mapStateToProps = state => ({
  event: state.event
})

const mapDispatchToProps = dispatch => ({
  // setEvents: events => dispatch(setEvents(events))
})

export default connect(mapStateToProps, mapDispatchToProps)(Event)
