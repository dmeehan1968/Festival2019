import React from 'react'
import { connect } from 'react-redux'
import { Helmet } from 'react-helmet'

import VenueMap from 'app/components/VenueMap'
import OpeningTimes from 'app/components/OpeningTimes'
import Meta from 'app/components/Meta'

const Event = ({ event = {}, dates = [] }) => {
  return (
    <section className="eventdetail">
      <Helmet>
        <title>{event.title}</title>
      </Helmet>
      <Meta title="Title" content={event.title} />
      <Meta title="Status" content={event.eventstatus.map(s => s.description).join(', ')} />
      <Meta title="Subtitle" content={event.subtitle} />
      <Meta title="About the Event" content={event.shortdesc} />
      <Meta title="Event Type" content={event.eventtypes.map(e => e.description).join(', ')} />
      <Meta title="Disciplines" content={event.disciplines.map(d => d.description).join(', ')} />
      <Meta title="Telephone" content={event.contact.telephone} />
      <Meta title="Email" content={event.contact.email} />
      <Meta title="Web" content={event.contact.website} />
      <Meta title="Booking Contact" content="-" />
      <Meta title="Booking Info" content="-" />
      <Meta title="Age Info" content={event.ageinfo} />
      <Meta title="Opening Times" content={<OpeningTimes dates={dates} times={event.opening_times}/>} />
      <Meta title="Further Info" content={event.furtherinfo} />
      <Meta title="Long Description" content={event.longdesc} />
      <h1>Venue Information</h1>
      <Meta
        title="Map"
        content={
          <VenueMap
            lat={event.venue.addresscontact.latitude}
            lng={event.venue.addresscontact.longitude}
            title={event.title}
          />
        }
      />
      <Meta title="Address" content={[
        event.venue.addresscontact.address1,
        event.venue.addresscontact.address2,
        event.venue.addresscontact.address3,
        event.venue.addresscontact.town,
        event.venue.addresscontact.county,
        event.venue.addresscontact.postcode,
        ].filter(addr => !!addr).map((addr, i) => <React.Fragment key={i}>{addr}<br /></React.Fragment>)} />
      <Meta title="For Venue Information" content={event.venue.telephone} />
      <Meta title="Region" content={event.venue.regions.map(r => r.description).join(', ')} />
      <Meta title="Disabled" content={event.venue.disabled.description} />
      <Meta title="Toilets" content={event.venue.toilet.description} />
      <Meta title="Dogs" content={event.venue.dog.description} />
      <Meta title="Refreshments" content={event.venue.refreshments} />
      <Meta title="Directions (By Foot)" content={event.venue.byfoot} />
      <Meta title="Directions (By Car)" content={event.venue.bycar} />
      <Meta title="Directions (By Public Transport)" content={event.venue.bypublictransport} />
      <Meta title="Parking" content={event.venue.parking} />
      <Meta title="Further Info" content={event.venue.furtherinfo} />
      <h2>Events at this venue</h2>
      <p>-</p>
    </section>
  )
}

const mapStateToProps = state => ({
  event: state.event,
  dates: state.dates,
})

const mapDispatchToProps = dispatch => ({
  // setEvents: events => dispatch(setEvents(events))
})

export default connect(mapStateToProps, mapDispatchToProps)(Event)
