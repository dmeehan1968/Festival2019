import React from 'react'
import moment from 'moment'

import styles from './EventCard.less'

const Event = ({ id, title, subtitle, shortdesc, preferred_image, opening_times, venue, disciplines }) => {
  return (
    <article className={styles.eventcard}>
      <section className={styles.meta}>
        <h1 className={styles.title}>
          <a href={`/events/${id}`}>{title}</a>
        </h1>
        {subtitle ? <h1 className={styles.subtitle}>{subtitle}</h1> : null}
        <p className={styles.shortdesc}>{shortdesc}</p>
        <p className={styles.opening_times}>
          {opening_times.map(open => {
            return <span key={open.id}>{moment(open.start).format('ddD')}</span>
          }).reduce((acc, el) => [ acc, ', ', el ])}
        </p>
        <p className={styles.regions}>
          {venue.regions.map(region => {
            return <span key={region.id}>{region.description}</span>
          }).reduce( (acc, el) => [ acc, ', ', el])}
        </p>
        <p className={styles.disciplines}>
          {disciplines.map(discipline => {
            return <span key={discipline.id}>{discipline.description}</span>
          }).reduce( (acc, el) => [ acc, ', ', el])}
        </p>
      </section>
      {preferred_image && preferred_image.filename ? <section className={styles.image}>
        <img src={preferred_image.filename} alt={preferred_image.title} />
      </section> : null}
    </article>
  )
}

export default Event
